<!DOCTYPE html>
<html lang="en-UK">
    <head>
        <title>Management builder</title>
        <meta name="description" content="Single Page application with recursive node displays" />
        <link rel="preload" as="image" type="image/png" imagesizes="50vw"
            href="https://simpleicon.com/wp-content/uploads/loading.png"
            imagesrcset="
                https://simpleicon.com/wp-content/uploads/loading-64x64.png 64w,
                https://simpleicon.com/wp-content/uploads/loading-128x128.png 128w,
                https://simpleicon.com/wp-content/uploads/loading-150x150.png 150w,
                https://simpleicon.com/wp-content/uploads/loading-256x256.png 256w"
        />
        <link rel="icon" fetchpriority="high" href="https://www.swisstxt.ch/favicon.gif" type="image/gif" />
        <link rel="apple-touch-icon" fetchpriority="low" href="https://www.swisstxt.ch/favicon.gif" />
        <link href="styles.css" rel="stylesheet" type="text/css" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="theme-color" loading="lazy" content="darkred" />
        <script src="app.js" async></script>
    </head>
    <body onload="onPageLoaded()" class="lazy-background">
        <img id="loading-image" alt="loading..."  sizes="50vw"
            src="http://simpleicon.com/wp-content/uploads/loading.png"
            imagesrcset="
                https://simpleicon.com/wp-content/uploads/loading-64x64.png 64w ,
                https://simpleicon.com/wp-content/uploads/loading-128x128.png 128w,
                https://simpleicon.com/wp-content/uploads/loading-150x150.png 150w,
                https://simpleicon.com/wp-content/uploads/loading-256x256.png 256w"
        />
        <div id="main">
            <h3>Hierarchical Organizational Chart Builder</h3>
            <div class="flex-container">
                <small class="flex-comment">flex-container</small>
                <div class="flex-row">
                    <span>Number of persons : </span>
                    <input type="text" id="nbPersonsInput" placeholder="0-5000" onkeydown="nbPersonsInput(event, this.value)" autofocus style="width:3em" />
                    <small>(max 5000)</small>
                    <button onclick="createPersons($('nbPersonsInput').value)">Apply</button>
                    <span id="loading" class="light-box" hidden>Loading ...</span>
                    <span id="alert" class="alert-box" hidden>Enter an integer smaller than 5000 ...</span>
                </div>
                <div id="treeContainer" class="flex-row">
                    <span class="light-text">Results</span>
                </div>
            </div>
        </div>

        <template id="person-display-template">
            <head>
                <link href="styles.css" rel="stylesheet" type="text/css" />
                <style>
                    *.person {
                        width: fit-content;
                        border: 2px solid var(--maxRed);
                        cursor: pointer;
                        user-select: none;
                    }
                    ::slotted(img) {
                        border-radius: var(--radius);
                        width:10em;
                    }
                    *.name-field { background-color: white; }
                    /* Hide the nested list */
                    .nested {
                    /* display: none; */
                        visibility:hidden;
                    }
                    *.caret-standard::before {
                        content: "\25B6";
                        color: var(--maxRed);
                        display: inline-block;
                        margin-right: 6px;
                    }
                    *.caret-opened::before {
                        transform: rotate(90deg);
                    }
                </style>
                <script>
                    function templateClicked(tag) {
                        toggleCaretOpening(tag);
                    }
                    function toggleCaretOpening(tag) {
                        caretTagClasslist = tag.querySelector(".caret-standard").classList;
                        log(caretTagClasslist);
                        caretTagClasslist.contains("caret-opened")
                        ? caretTagClasslist.remove("caret-opened")
                        : caretTagClasslist.add("caret-opened");
                    }
                </script>
                <slot name="id">Person JSON ID</slot>
            </head>
            <body>
                <div id="mainDiv" class="person" onclick="templateClicked(this)" >
                    <slot name="portrait"><img alt="Portrait picture"></img></slot>
                    <div class="name-field">
                        <slot name="first">First Name</slot>
                        <slot name="last">Last Name</slot>
                    </div>
                    <div class="caret-standard">Team managed</span>
                </div>
            </body>
        </template>
    </body>
</html>